import{I as z,l as j,q as R}from"./chunk-YQXGHQL7.js";import{$a as p,Ab as _,Da as E,Eb as $,Lb as C,O as I,Oa as V,U as T,Z as g,Za as S,_ as h,_a as m,bb as k,cb as D,ga as f,hb as r,ib as l,jb as A,kb as w,lb as y,mb as P,na as M,nb as x,ob as s,sb as Q,tb as N,ub as F,vb as L,wb as b,xa as G,ya as d,yb as c,zb as O}from"./chunk-N5GTE3F3.js";var H=["searchInput"],q=(n,a)=>a.value;function U(n,a){n&1&&(r(0,"span",10),c(1,"*"),l())}function B(n,a){if(n&1&&(r(0,"label",2),c(1),m(2,U,2,0,"span",10),l()),n&2){let t=s();y("id",t.labelId),d(),_(" ",t.label," "),d(),p(t.config.required?2:-1)}}function K(n,a){if(n&1&&(r(0,"span",5),c(1),l()),n&2){let t=s();d(),O(t.config.placeholder||"Select option...")}}function Y(n,a){if(n&1){let t=w();r(0,"span",12),c(1),r(2,"span",13),x("click",function(i){let o=g(t).$implicit,u=s(3);return h(u.removeOption(i,o))}),c(3,"close"),l()()}if(n&2){let t=a.$implicit;d(),_(" ",t.label," ")}}function Z(n,a){if(n&1&&k(0,Y,4,1,"span",12,q),n&2){let t=s(2);D(t.selectedOptions())}}function J(n,a){if(n&1&&(r(0,"span",11),c(1),l()),n&2){let t=s(2);d(),O(t.selectedOptions()[0].label)}}function W(n,a){if(n&1&&m(0,Z,2,0)(1,J,2,1,"span",11),n&2){let t=s();p(t.config.multiSelect?0:1)}}function X(n,a){if(n&1){let t=w();r(0,"div",14)(1,"div",18)(2,"span",19),c(3,"search"),l(),r(4,"input",20,0),x("input",function(){g(t);let i=L(5),o=s(2);return h(o.searchQuery.set(i.value))})("keydown.enter",function(i){g(t);let o=s(2);return h(o.handleSearchEnter(i))}),l()()()}if(n&2){let t=s(2);d(4),y("value",t.searchQuery())("placeholder",t.config.searchPlaceholder||"Filter items...")}}function ee(n,a){n&1&&(r(0,"span",27),c(1,"check"),l())}function te(n,a){if(n&1&&(r(0,"div",26),m(1,ee,2,0,"span",27),l()),n&2){let t=s().$implicit,e=s(2);b("bg-indigo-600",e.isSelected(t))("border-indigo-600",e.isSelected(t))("border-gray-300",!e.isSelected(t)),d(),p(e.isSelected(t)?1:-1)}}function ie(n,a){n&1&&(r(0,"span",25),c(1,"check"),l())}function ne(n,a){if(n&1){let t=w();r(0,"li",21),x("click",function(){let i=g(t).$implicit,o=s(2);return h(o.selectOption(i))}),r(1,"div",22),m(2,te,2,7,"div",23),r(3,"span",24),c(4),l()(),m(5,ie,2,0,"span",25),l()}if(n&2){let t=a.$implicit,e=a.$index,i=s(2);b("bg-indigo-50/50",i.isSelected(t)||e===i.focusedIndex())("dark:bg-indigo-900/20",i.isSelected(t)||e===i.focusedIndex()),S("aria-selected",i.isSelected(t)),d(2),p(i.config.multiSelect?2:-1),d(),b("text-indigo-600",i.isSelected(t))("dark:text-indigo-400",i.isSelected(t))("text-gray-700",!i.isSelected(t))("dark:text-gray-300",!i.isSelected(t)),d(),_(" ",t.label," "),d(),p(!i.config.multiSelect&&i.isSelected(t)?5:-1)}}function oe(n,a){if(n&1&&(r(0,"p",31),c(1),l()),n&2){let t=s(4);d(),_(" Invalid format: Only ",t.config.allowedCharacters," allowed ")}}function re(n,a){if(n&1){let t=w();r(0,"div",30),m(1,oe,2,1,"p",31),r(2,"button",32),x("click",function(){g(t);let i=s(3);return h(i.addNewItem())}),c(3),l()()}if(n&2){let t=s(3);d(),p(!t.isSearchQueryValid()&&t.config.allowedCharacters!=="all"?1:-1),d(),y("disabled",!t.canAdd()),d(),_(" ",t.config.addLabel||"+ Add as New Item"," ")}}function ae(n,a){if(n&1&&(r(0,"li",17)(1,"span",28),c(2,"find_in_page"),l(),r(3,"p",29),c(4),l(),m(5,re,4,3,"div",30),l()),n&2){let t=s(2);d(4),_('No results found for "',t.searchQuery(),'"'),d(),p(t.config.allowAdd&&t.searchQuery()?5:-1)}}function de(n,a){if(n&1&&(r(0,"div",7),m(1,X,6,2,"div",14),r(2,"ul",15),k(3,ne,6,16,"li",16,q,!1,ae,6,2,"li",17),l()()),n&2){let t=s();d(),p(t.config.allowSearch?1:-1),d(2),D(t.filteredOptions())}}function le(n,a){if(n&1&&(r(0,"p",8)(1,"span",33),c(2,"error_outline"),l(),c(3),l()),n&2){let t=s();d(3),_(" ",t.error," ")}}function se(n,a){if(n&1){let t=w();r(0,"div",9),A(1,"div",34),r(2,"div",35)(3,"div",36)(4,"span",37),c(5,"check_circle"),l()(),r(6,"h3",38),c(7,"Item Added Successfully"),l(),r(8,"p",39),c(9),l(),r(10,"button",40),x("click",function(){g(t);let i=s();return h(i.showSuccess.set(!1))}),c(11," Great! "),l()()()}if(n&2){let t=s();d(9),_('"',t.lastAdded(),'" has been added and selected.')}}var we=(()=>{let a=class a{constructor(){this.elementRef=T(M),this.labelId=`dropdown-label-${Math.random().toString(36).substr(2,9)}`,this.options=[],this.config={placeholder:"Select options",allowSearch:!0,multiSelect:!1,allowSort:!0,allowAdd:!0,showSuccessModal:!0},this.label="",this.error=null,this.optionAdded=new E,this.selectionChange=new E,this.isOpen=f(!1),this.searchQuery=f(""),this.disabled=f(!1),this.focusedIndex=f(-1),this.showSuccess=f(!1),this.lastAdded=f(""),this._value=f([]),this.selectedOptions=C(()=>{let e=this._value();return this.options.filter(i=>e.includes(i.value))}),this.filteredOptions=C(()=>{let e=[...this.options],i=this.searchQuery().toLowerCase();return i&&(e=e.filter(o=>o.label.toLowerCase().includes(i))),this.config.allowSort&&e.sort((o,u)=>o.label.localeCompare(u.label)),e}),this.onChange=()=>{},this.onTouched=()=>{},this.cleanedSearchQuery=C(()=>this.searchQuery().trim().replace(/\s+/g," ")),this.isSearchQueryValid=C(()=>{let e=this.cleanedSearchQuery();if(!e)return!1;switch(this.config.allowedCharacters||"all"){case"alpha":return/^[a-zA-Z\s]+$/.test(e);case"numeric":return/^[0-9\s]+$/.test(e);case"alphanumeric":return/^[a-zA-Z0-9\s]+$/.test(e);default:return!0}}),this.canAdd=C(()=>{if(!this.config.allowAdd||!this.isSearchQueryValid())return!1;let e=this.cleanedSearchQuery().toLowerCase();return!this.options.some(o=>o.label.toLowerCase()===e)})}writeValue(e){e==null?this._value.set([]):Array.isArray(e)?this._value.set(e):this._value.set([e])}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled.set(e)}toggleDropdown(){this.disabled()||(this.isOpen.update(e=>!e),this.isOpen()?(this.focusedIndex.set(-1),setTimeout(()=>this.searchInput?.nativeElement.focus(),0)):this.onTouched())}selectOption(e){e.disabled||(this.config.multiSelect?this._value.update(i=>i.includes(e.value)?i.filter(o=>o!==e.value):[...i,e.value]):(this._value.set([e.value]),this.isOpen.set(!1)),this.emitValue())}removeOption(e,i){e.stopPropagation(),this._value.update(o=>o.filter(u=>u!==i.value)),this.emitValue()}isSelected(e){return this._value().includes(e.value)}emitValue(){let e=this._value(),i=this.config.multiSelect?e:e[0]??null;this.onChange(i),this.selectionChange.emit(i)}addNewItem(){if(!this.canAdd())return;let e=this.cleanedSearchQuery(),i=e.toLowerCase().replace(/ /g,"_"),o={label:e,value:i};this.options=[...this.options,o],this.selectOption(o),this.lastAdded.set(e),this.config.showSuccessModal&&this.showSuccess.set(!0),this.searchQuery.set(""),this.optionAdded.emit(o)}onClickOutside(e){this.elementRef.nativeElement.contains(e.target)||this.isOpen.set(!1)}onKeyDown(e){if(!this.disabled())switch(e.key){case"Enter":case" ":this.isOpen()?this.focusedIndex()!==-1&&(this.selectOption(this.filteredOptions()[this.focusedIndex()]),e.preventDefault()):(this.toggleDropdown(),e.preventDefault());break;case"ArrowDown":this.isOpen()?this.focusedIndex.update(i=>Math.min(i+1,this.filteredOptions().length-1)):this.toggleDropdown(),e.preventDefault();break;case"ArrowUp":this.isOpen()&&this.focusedIndex.update(i=>Math.max(i-1,0)),e.preventDefault();break;case"Escape":this.isOpen.set(!1);break;case"Tab":this.isOpen()&&this.isOpen.set(!1);break}}handleSearchEnter(e){e.preventDefault(),this.filteredOptions().length>0?this.selectOption(this.filteredOptions()[0]):this.config.allowAdd&&this.addNewItem()}};a.\u0275fac=function(i){return new(i||a)},a.\u0275cmp=V({type:a,selectors:[["app-generic-dropdown"]],viewQuery:function(i,o){if(i&1&&Q(H,5),i&2){let u;N(u=F())&&(o.searchInput=u.first)}},hostBindings:function(i,o){i&1&&P("click",function(v){return o.onClickOutside(v)},G)},inputs:{options:"options",config:"config",label:"label",error:"error"},outputs:{optionAdded:"optionAdded",selectionChange:"selectionChange"},features:[$([{provide:R,useExisting:I(()=>a),multi:!0}])],decls:11,vars:25,consts:[["searchInput",""],[1,"lx-dropdown","relative","w-full",3,"keydown"],[1,"block","text-xs","font-bold","uppercase","tracking-widest","text-gray-500","mb-2",3,"id"],["role","combobox",1,"lx-select-trigger","flex","items-center","justify-between","w-full","bg-white","dark:bg-gray-800","border-2","rounded-2xl","px-4","py-3","cursor-pointer","transition-all","duration-300","group","focus:outline-none","focus:ring-4","focus:ring-indigo-500/10","focus:border-indigo-500",3,"click"],[1,"flex","flex-wrap","gap-1","items-center","overflow-hidden"],[1,"text-gray-400","dark:text-gray-500","truncate"],[1,"material-icons","transition-transform","duration-300","text-gray-400"],[1,"absolute","left-0","right-0","mt-2","z-[999]","bg-white","dark:bg-gray-800","border","border-gray-100","dark:border-gray-700","rounded-2xl","shadow-2xl","overflow-hidden","animate-slide-down"],[1,"mt-2","text-[10px]","font-bold","text-rose-500","uppercase","tracking-widest","animate-fade-in","flex","items-center"],["role","dialog","aria-modal","true",1,"fixed","inset-0","z-[1000]","flex","items-center","justify-center","p-4","animate-fade-in"],[1,"text-rose-500","ml-0.5"],[1,"text-gray-900","dark:text-white","font-medium","truncate"],[1,"inline-flex","items-center","bg-indigo-50","dark:bg-indigo-900/40","text-indigo-600","dark:text-indigo-400","px-2","py-0.5","rounded-lg","text-xs","font-bold","animate-fade-in","border","border-indigo-100","dark:border-indigo-800"],["role","button","aria-label","Remove item",1,"material-icons","text-[14px]","ml-1","hover:text-indigo-800","cursor-pointer",3,"click"],[1,"p-3","border-b","border-gray-50","dark:border-gray-700/50"],["role","listbox",1,"max-h-60","overflow-y-auto","py-2","scrollbar-thin","scrollbar-thumb-gray-200","dark:scrollbar-thumb-gray-700"],["role","option",1,"flex","items-center","justify-between","px-4","py-2.5","cursor-pointer","transition-colors","hover:bg-indigo-50","dark:hover:bg-indigo-900/30","group/item",3,"bg-indigo-50/50","dark:bg-indigo-900/20"],[1,"px-4","py-8","text-center","bg-gray-50/50","dark:bg-gray-900/50","flex","flex-col","items-center"],[1,"relative"],[1,"material-icons","absolute","left-3","top-1/2","-translate-y-1/2","text-gray-400","text-sm"],["type","text",1,"w-full","bg-gray-50","dark:bg-gray-900","border-none","rounded-xl","pl-9","pr-4","py-2","text-sm","outline-none","focus:ring-2","focus:ring-indigo-500/20","transition-all",3,"input","keydown.enter","value","placeholder"],["role","option",1,"flex","items-center","justify-between","px-4","py-2.5","cursor-pointer","transition-colors","hover:bg-indigo-50","dark:hover:bg-indigo-900/30","group/item",3,"click"],[1,"flex","items-center"],[1,"w-5","h-5","rounded-md","border-2","mr-3","flex","items-center","justify-center","transition-all",3,"bg-indigo-600","border-indigo-600","border-gray-300"],[1,"text-sm","transition-colors"],[1,"material-icons","text-indigo-500","text-sm"],[1,"w-5","h-5","rounded-md","border-2","mr-3","flex","items-center","justify-center","transition-all"],[1,"material-icons","text-[14px]","text-white"],[1,"material-icons","text-gray-300","text-3xl","mb-2"],[1,"text-xs","text-gray-400","font-medium"],[1,"mt-4","w-full","px-4"],[1,"text-[10px]","text-rose-500","font-bold","uppercase","tracking-tighter","mb-2"],[1,"w-full","px-4","py-2","bg-indigo-600","text-white","text-xs","font-bold","rounded-xl","shadow-lg","shadow-indigo-500/30","hover:shadow-indigo-500/50","transition-all","disabled:opacity-50","disabled:grayscale","disabled:cursor-not-allowed",3,"click","disabled"],[1,"material-icons","text-[14px]","mr-1"],[1,"absolute","inset-0","bg-black/40","backdrop-blur-[2px]"],[1,"relative","bg-white","dark:bg-gray-800","rounded-3xl","p-8","shadow-2xl","max-w-sm","w-full","text-center","scale-up"],[1,"w-16","h-16","bg-emerald-100","dark:bg-emerald-900/30","text-emerald-600","rounded-full","flex","items-center","justify-center","mx-auto","mb-4","animate-bounce"],[1,"material-icons","text-3xl"],[1,"text-xl","font-bold","text-gray-900","dark:text-white","mb-2"],[1,"text-sm","text-gray-500","dark:text-gray-400","mb-6"],[1,"w-full","py-3","bg-indigo-600","text-white","rounded-xl","font-bold","shadow-lg","hover:bg-indigo-700","transition-all",3,"click"]],template:function(i,o){i&1&&(r(0,"div",1),x("keydown",function(v){return o.onKeyDown(v)}),m(1,B,3,3,"label",2),r(2,"div",3),x("click",function(){return o.toggleDropdown()}),r(3,"div",4),m(4,K,2,1,"span",5)(5,W,2,1),l(),r(6,"span",6),c(7,"expand_more"),l()(),m(8,de,6,2,"div",7),m(9,le,4,1,"p",8),l(),m(10,se,12,1,"div",9)),i&2&&(b("lx-disabled",o.disabled()),d(),p(o.label?1:-1),d(),b("border-indigo-500",o.isOpen())("border-gray-200",!o.isOpen()&&!o.error)("dark:border-gray-700",!o.isOpen()&&!o.error)("border-rose-500",o.error)("shadow-xl",o.isOpen())("shadow-indigo-500/10",o.isOpen()),S("tabindex",o.disabled()?-1:0)("aria-haspopup","listbox")("aria-expanded",o.isOpen())("aria-labelledby",o.labelId),d(2),p(o.selectedOptions().length===0?4:5),d(2),b("rotate-180",o.isOpen()),d(2),p(o.isOpen()?8:-1),d(),p(o.error?9:-1),d(),p(o.showSuccess()?10:-1))},dependencies:[j,z],styles:[".animate-slide-down[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .3s cubic-bezier(.16,1,.3,1)}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .2s ease-out}.scale-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_scaleUp .3s cubic-bezier(.16,1,.3,1)}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_scaleUp{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}.scrollbar-thin[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.scrollbar-thin[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:10px}.lx-disabled[_ngcontent-%COMP%]{opacity:.6;pointer-events:none;grayscale:1}"],changeDetection:0});let n=a;return n})();export{we as a};
